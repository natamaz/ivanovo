!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";function b(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function c(a){var b=++j;return String(null===a?"rmjs-":a)+b}function d(a){var b=a.clone().css({height:"auto",width:a.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(a),c=b.outerHeight(),d=parseInt(b.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),e=a.data("defaultHeight");b.remove();var f=d||a.data("collapsedHeight")||e;a.data({expandedHeight:c,maxHeight:d,collapsedHeight:f}).css({maxHeight:"none"})}function e(a){if(!i[a.selector]){var b=" ";a.embedCSS&&""!==a.blockCSS&&(b+=a.selector+" + [data-readmore-toggle], "+a.selector+"[data-readmore]{"+a.blockCSS+"}"),b+=a.selector+"[data-readmore]{transition: height "+a.speed+"ms;overflow: hidden;}",function(a,b){var c=a.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=b:c.appendChild(a.createTextNode(b)),a.getElementsByTagName("head")[0].appendChild(c)}(document,b),i[a.selector]=!0}}function f(b,c){this.element=b,this.options=a.extend({},h,c),e(this.options),this._defaults=h,this._name=g,this.init(),window.addEventListener?(window.addEventListener("load",k),window.addEventListener("resize",k)):(window.attachEvent("load",k),window.attachEvent("resize",k))}var g="readmore",h={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},i={},j=0,k=b(function(){a("[data-readmore]").each(function(){var b=a(this),c="true"===b.attr("aria-expanded");d(b),b.css({height:b.data(c?"expandedHeight":"collapsedHeight")})})},100);f.prototype={init:function(){var b=a(this.element);b.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),d(b);var e=b.data("collapsedHeight"),f=b.data("heightMargin");if(b.outerHeight(!0)<=e+f)return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(b,!1),!0;var g=b.attr("id")||c(),h=this.options.startOpen?this.options.lessLink:this.options.moreLink;b.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:g}),b.after(a(h).on("click",function(a){return function(c){a.toggle(this,b[0],c)}}(this)).attr({"data-readmore-toggle":g,"aria-controls":g})),this.options.startOpen||b.css({height:e}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(b,!0)},toggle:function(b,c,d){d&&d.preventDefault(),b||(b=a('[aria-controls="'+this.element.id+'"]')[0]),c||(c=this.element);var e=a(c),f="",g="",h=!1,i=e.data("collapsedHeight");e.height()<=i?(f=e.data("expandedHeight")+"px",g="lessLink",h=!0):(f=i,g="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(b,e,!h),e.css({height:f}),e.on("transitionend",function(c){return function(){c.options.afterToggle&&"function"==typeof c.options.afterToggle&&c.options.afterToggle(b,e,h),a(this).attr({"aria-expanded":h}).off("transitionend")}}(this)),a(b).replaceWith(a(this.options[g]).on("click",function(a){return function(b){a.toggle(this,c,b)}}(this)).attr({"data-readmore-toggle":e.attr("id"),"aria-controls":e.attr("id")}))},destroy:function(){a(this.element).each(function(){var b=a(this);b.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),b.removeData()})}},a.fn.readmore=function(b){var c=arguments,d=this.selector;return b=b||{},"object"==typeof b?this.each(function(){if(a.data(this,"plugin_"+g)){var c=a.data(this,"plugin_"+g);c.destroy.apply(c)}b.selector=d,a.data(this,"plugin_"+g,new f(this,b))}):"string"==typeof b&&"_"!==b[0]&&"init"!==b?this.each(function(){var d=a.data(this,"plugin_"+g);d instanceof f&&"function"==typeof d[b]&&d[b].apply(d,Array.prototype.slice.call(c,1))}):void 0}});